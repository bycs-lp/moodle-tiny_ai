{"version":3,"file":"basedata.min.js","sources":["../../src/datahandler/basedata.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {getStrings} from 'core/str';\nimport {prefetchStrings} from 'core/prefetch';\n\n/**\n * Tiny AI base data provider.\n *\n * @module      tiny_ai/datahandler/basedata\n * @copyright   2024, ISB Bayern\n * @author      Philipp Memmel\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst stringKeys = [\n    'aigenerating',\n    'aisuggestion',\n    'audiogen_headline',\n    'audiogen_placeholder',\n    'back',\n    'cancel',\n    'describe_baseprompt',\n    'describe_headline',\n    'dismiss',\n    'dismisssuggestion',\n    'error_nopromptgiven',\n    'freeprompt_placeholder',\n    'gender',\n    'generalerror',\n    'generate',\n    'hideprompt',\n    'imggen_headline',\n    'imggen_placeholder',\n    'insertbelow',\n    'keeplanguagetype',\n    'languagetype',\n    'languagetype_prompt',\n    'mainselection_heading',\n    'maxwordcount',\n    'maxwordcount_prompt',\n    'nomaxwordcount',\n    'replaceselection',\n    'reworkprompt',\n    'simplelanguage',\n    'size',\n    'showprompt',\n    'summarize_baseprompt',\n    'summarize_headline',\n    'targetlanguage',\n    'technicallanguage',\n    'texttouse',\n    'toolname_audiogen',\n    'toolname_describe',\n    'toolname_describe_extension',\n    'toolname_imggen',\n    'toolname_summarize',\n    'toolname_summarize_extension',\n    'toolname_translate',\n    'toolname_translate_extension',\n    'toolname_tts',\n    'toolname_tts_extension',\n    'translate_baseprompt',\n    'translate_headline',\n    'tts_headline',\n    'voice'\n];\n\nlet strings = {};\n\n\n\nexport const init = async() => {\n    prefetchStrings('tiny_ai', stringKeys);\n    const stringRequest = stringKeys.map(key => {\n        return {key, component: 'tiny_ai'}\n    });\n    // We now get the strings. They are already prefetched, so this is not a performance feature.\n    // We just use this to avoid having to code asynchronously all the time just for retrieving the\n    // strings by using getString which returns a promise.\n    [\n        strings.aigenerating,\n        strings.aisuggestion,\n        strings.audiogen_headline,\n        strings.audiogen_placeholder,\n        strings.back,\n        strings.cancel,\n        strings.describe_baseprompt,\n        strings.describe_headline,\n        strings.dismiss,\n        strings.dismisssuggestion,\n        strings.error_nopromptgiven,\n        strings.freeprompt_placeholder,\n        strings.gender,\n        strings.generalerror,\n        strings.generate,\n        strings.hideprompt,\n        strings.imggen_headline,\n        strings.imggen_placeholder,\n        strings.insertbelow,\n        strings.keeplanguagetype,\n        strings.languagetype,\n        strings.languagetype_prompt,\n        strings.mainselection_heading,\n        strings.maxwordcount,\n        strings.maxwordcount_prompt,\n        strings.nomaxwordcount,\n        strings.replaceselection,\n        strings.reworkprompt,\n        strings.simplelanguage,\n        strings.size,\n        strings.showprompt,\n        strings.summarize_baseprompt,\n        strings.summarize_headline,\n        strings.targetlanguage,\n        strings.technicallanguage,\n        strings.texttouse,\n        strings.toolname_audiogen,\n        strings.toolname_describe,\n        strings.toolname_describe_extension,\n        strings.toolname_imggen,\n        strings.toolname_summarize,\n        strings.toolname_summarize_extension,\n        strings.toolname_translate,\n        strings.toolname_translate_extension,\n        strings.toolname_tts,\n        strings.toolname_tts_extension,\n        strings.translate_baseprompt,\n        strings.translate_headline,\n        strings.tts_headline,\n        strings.voice\n    ] = await getStrings(stringRequest);\n}\n\nexport const getTinyAiString = (string) => {\n    return strings[string];\n}\n\nexport const getBackAndGenerateButtonContext = () => {\n    return {\n        footer_buttons: [\n            {\n                hasText: true,\n                button_text: strings.back,\n                icon_left: true,\n                icon_right: false,\n                primary: false,\n                secondary: false,\n                tertiary: true,\n                iconname: 'arrow-left',\n                iconstyle: 'solid',\n                action: 'back'\n            },\n            {\n                hasText: true,\n                button_text: strings.generate,\n                icon_left: true,\n                icon_right: false,\n                primary: true,\n                secondary: false,\n                tertiary: false,\n                iconname: 'sparkle',\n                customicon: true,\n                action: 'generate'\n            }\n        ]\n    };\n}\n\nexport const getReplaceButtonsContext = () => {\n    return {\n        footer_iconbuttons:\n            [\n                {\n                    action: 'delete',\n                    iconName: 'trash'\n                },\n                {\n                    action: 'regenerate',\n                    iconName: 'arrows-rotate'\n                }\n            ],\n        footer_buttons:\n            [\n                {\n                    action: 'insert',\n                    hasText: true,\n                    button_text: strings.insertbelow,\n                    icon_left: true,\n                    icon_right: false,\n                    secondary: true,\n                    iconname: 'text-insert-last',\n                    customicon: true\n                },\n                {\n                    action: 'replace',\n                    hasText: true,\n                    button_text: strings.replaceselection,\n                    icon_left: true,\n                    icon_right: false,\n                    primary: true,\n                    iconname: 'check',\n                    iconstyle: 'solid'\n                }\n            ],\n    };\n};\n\nexport const getInputContext = () => {\n    return {\n        input: [\n            {\n                iconname: 'sparkle',\n                customicon: true,\n                button: [\n                    {\n                        customicon: false,\n                        iconname: 'arrow-right',\n                        iconstyle: 'solid',\n                        icon_left: false,\n                        icon_right: true\n                    }\n                ]\n            }\n        ],\n    }\n}\n\nexport const getShowPromptButtonContext = () => {\n    return {\n        hasText: true,\n        button_text: strings.showprompt,\n        icon_left: true,\n        icon_right: false,\n        tertiary: true,\n        iconname: 'eye',\n        iconstyle: 'solid',\n        action: 'showprompt',\n        textareatype: 'prompt',\n        collapsed: true\n    }\n};\n"],"names":["stringKeys","strings","async","stringRequest","map","key","component","aigenerating","aisuggestion","audiogen_headline","audiogen_placeholder","back","cancel","describe_baseprompt","describe_headline","dismiss","dismisssuggestion","error_nopromptgiven","freeprompt_placeholder","gender","generalerror","generate","hideprompt","imggen_headline","imggen_placeholder","insertbelow","keeplanguagetype","languagetype","languagetype_prompt","mainselection_heading","maxwordcount","maxwordcount_prompt","nomaxwordcount","replaceselection","reworkprompt","simplelanguage","size","showprompt","summarize_baseprompt","summarize_headline","targetlanguage","technicallanguage","texttouse","toolname_audiogen","toolname_describe","toolname_describe_extension","toolname_imggen","toolname_summarize","toolname_summarize_extension","toolname_translate","toolname_translate_extension","toolname_tts","toolname_tts_extension","translate_baseprompt","translate_headline","tts_headline","voice","string","footer_buttons","hasText","button_text","icon_left","icon_right","primary","secondary","tertiary","iconname","iconstyle","action","customicon","footer_iconbuttons","iconName","input","button","textareatype","collapsed"],"mappings":";;;;;;;;;MA2BMA,WAAa,CACf,eACA,eACA,oBACA,uBACA,OACA,SACA,sBACA,oBACA,UACA,oBACA,sBACA,yBACA,SACA,eACA,WACA,aACA,kBACA,qBACA,cACA,mBACA,eACA,sBACA,wBACA,eACA,sBACA,iBACA,mBACA,eACA,iBACA,OACA,aACA,uBACA,qBACA,iBACA,oBACA,YACA,oBACA,oBACA,8BACA,kBACA,qBACA,+BACA,qBACA,+BACA,eACA,yBACA,uBACA,qBACA,eACA,aAGAC,QAAU,iBAIMC,wCACA,UAAWF,kBACrBG,cAAgBH,WAAWI,KAAIC,MAC1B,CAACA,IAAAA,IAAKC,UAAW,eAMxBL,QAAQM,aACRN,QAAQO,aACRP,QAAQQ,kBACRR,QAAQS,qBACRT,QAAQU,KACRV,QAAQW,OACRX,QAAQY,oBACRZ,QAAQa,kBACRb,QAAQc,QACRd,QAAQe,kBACRf,QAAQgB,oBACRhB,QAAQiB,uBACRjB,QAAQkB,OACRlB,QAAQmB,aACRnB,QAAQoB,SACRpB,QAAQqB,WACRrB,QAAQsB,gBACRtB,QAAQuB,mBACRvB,QAAQwB,YACRxB,QAAQyB,iBACRzB,QAAQ0B,aACR1B,QAAQ2B,oBACR3B,QAAQ4B,sBACR5B,QAAQ6B,aACR7B,QAAQ8B,oBACR9B,QAAQ+B,eACR/B,QAAQgC,iBACRhC,QAAQiC,aACRjC,QAAQkC,eACRlC,QAAQmC,KACRnC,QAAQoC,WACRpC,QAAQqC,qBACRrC,QAAQsC,mBACRtC,QAAQuC,eACRvC,QAAQwC,kBACRxC,QAAQyC,UACRzC,QAAQ0C,kBACR1C,QAAQ2C,kBACR3C,QAAQ4C,4BACR5C,QAAQ6C,gBACR7C,QAAQ8C,mBACR9C,QAAQ+C,6BACR/C,QAAQgD,mBACRhD,QAAQiD,6BACRjD,QAAQkD,aACRlD,QAAQmD,uBACRnD,QAAQoD,qBACRpD,QAAQqD,mBACRrD,QAAQsD,aACRtD,QAAQuD,aACF,mBAAWrD,yCAGOsD,QACrBxD,QAAQwD,iDAG4B,KACpC,CACHC,eAAgB,CACZ,CACIC,SAAS,EACTC,YAAa3D,QAAQU,KACrBkD,WAAW,EACXC,YAAY,EACZC,SAAS,EACTC,WAAW,EACXC,UAAU,EACVC,SAAU,aACVC,UAAW,QACXC,OAAQ,QAEZ,CACIT,SAAS,EACTC,YAAa3D,QAAQoB,SACrBwC,WAAW,EACXC,YAAY,EACZC,SAAS,EACTC,WAAW,EACXC,UAAU,EACVC,SAAU,UACVG,YAAY,EACZD,OAAQ,iDAMgB,KAC7B,CACHE,mBACI,CACI,CACIF,OAAQ,SACRG,SAAU,SAEd,CACIH,OAAQ,aACRG,SAAU,kBAGtBb,eACI,CACI,CACIU,OAAQ,SACRT,SAAS,EACTC,YAAa3D,QAAQwB,YACrBoC,WAAW,EACXC,YAAY,EACZE,WAAW,EACXE,SAAU,mBACVG,YAAY,GAEhB,CACID,OAAQ,UACRT,SAAS,EACTC,YAAa3D,QAAQgC,iBACrB4B,WAAW,EACXC,YAAY,EACZC,SAAS,EACTG,SAAU,QACVC,UAAW,qCAMA,KACpB,CACHK,MAAO,CACH,CACIN,SAAU,UACVG,YAAY,EACZI,OAAQ,CACJ,CACIJ,YAAY,EACZH,SAAU,cACVC,UAAW,QACXN,WAAW,EACXC,YAAY,4CAQM,KAC/B,CACHH,SAAS,EACTC,YAAa3D,QAAQoC,WACrBwB,WAAW,EACXC,YAAY,EACZG,UAAU,EACVC,SAAU,MACVC,UAAW,QACXC,OAAQ,aACRM,aAAc,SACdC,WAAW"}