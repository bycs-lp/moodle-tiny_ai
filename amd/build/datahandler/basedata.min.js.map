{"version":3,"file":"basedata.min.js","sources":["../../src/datahandler/basedata.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {getStrings} from 'core/str';\nimport {prefetchStrings} from 'core/prefetch';\nimport {constants} from 'tiny_ai/constants';\n\n/**\n * Tiny AI base data provider.\n *\n * @module      tiny_ai/datahandler/basedata\n * @copyright   2024, ISB Bayern\n * @author      Philipp Memmel\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst stringKeys = [\n    'aigenerating',\n    'aisuggestion',\n    'audiogen_headline',\n    'audiogen_placeholder',\n    'back',\n    'backbutton_tooltip',\n    'cancel',\n    'deletebutton_tooltip',\n    'describeimg_baseprompt',\n    'describeimg_headline',\n    'describe_baseprompt',\n    'describe_headline',\n    'dismiss',\n    'dismisssuggestion',\n    'error_nofile',\n    'error_nofileinclipboard_text',\n    'error_nofileinclipboard_title',\n    'error_nopromptgiven',\n    'freeprompt_placeholder',\n    'freepromptbutton_tooltip',\n    'gender',\n    'generalerror',\n    'generate',\n    'generatebutton_tooltip',\n    'hideprompt',\n    'imagefromeditor',\n    'imagetotext_baseprompt',\n    'imagetotext_headline',\n    'imagetotext_insertimage',\n    'imggen_headline',\n    'imggen_placeholder',\n    'insertatcaret',\n    'insertatcaretbutton_tooltip',\n    'insertbelow',\n    'insertbelowbutton_tooltip',\n    'keeplanguagetype',\n    'languagetype',\n    'languagetype_prompt',\n    'mainselection_heading',\n    'maxwordcount',\n    'maxwordcount_prompt',\n    'nomaxwordcount',\n    'regeneratebutton_tooltip',\n    'replaceselection',\n    'replaceselectionbutton_tooltip',\n    'reworkprompt',\n    'simplelanguage',\n    'size',\n    'showprompt',\n    'showpromptbutton_tooltip',\n    'summarize_baseprompt',\n    'summarize_headline',\n    'targetlanguage',\n    'technicallanguage',\n    'texttouse',\n    'toolname_audiogen',\n    'toolname_describe',\n    'toolname_describeimg',\n    'toolname_describe_extension',\n    'toolname_imggen',\n    'toolname_imagetotext',\n    'toolname_summarize',\n    'toolname_summarize_extension',\n    'toolname_translate',\n    'toolname_translate_extension',\n    'toolname_tts',\n    'toolname_tts_extension',\n    'translate_baseprompt',\n    'translate_headline',\n    'tts_headline',\n    'voice'\n];\n\nlet strings = {};\n\n\n\nexport const init = async() => {\n    prefetchStrings('tiny_ai', stringKeys);\n    const stringRequest = stringKeys.map(key => {\n        return {key, component: 'tiny_ai'};\n    });\n    // We now get the strings. They are already prefetched, so this is not a performance feature.\n    // We just use this to avoid having to code asynchronously all the time just for retrieving the\n    // strings by using getString which returns a promise.\n    [\n        strings.aigenerating,\n        strings.aisuggestion,\n        strings.audiogen_headline,\n        strings.audiogen_placeholder,\n        strings.back,\n        strings.backbutton_tooltip,\n        strings.cancel,\n        strings.deletebutton_tooltip,\n        strings.describeimg_baseprompt,\n        strings.describeimg_headline,\n        strings.describe_baseprompt,\n        strings.describe_headline,\n        strings.dismiss,\n        strings.dismisssuggestion,\n        strings.error_nofile,\n        strings.error_nofileinclipboard_text,\n        strings.error_nofileinclipboard_title,\n        strings.error_nopromptgiven,\n        strings.freeprompt_placeholder,\n        strings.freepromptbutton_tooltip,\n        strings.gender,\n        strings.generalerror,\n        strings.generate,\n        strings.generatebutton_tooltip,\n        strings.hideprompt,\n        strings.imagefromeditor,\n        strings.imagetotext_baseprompt,\n        strings.imagetotext_headline,\n        strings.imagetotext_insertimage,\n        strings.imggen_headline,\n        strings.imggen_placeholder,\n        strings.insertatcaret,\n        strings.insertatcaretbutton_tooltip,\n        strings.insertbelow,\n        strings.insertbelowbutton_tooltip,\n        strings.keeplanguagetype,\n        strings.languagetype,\n        strings.languagetype_prompt,\n        strings.mainselection_heading,\n        strings.maxwordcount,\n        strings.maxwordcount_prompt,\n        strings.nomaxwordcount,\n        strings.regeneratebutton_tooltip,\n        strings.replaceselection,\n        strings.replaceselectionbutton_tooltip,\n        strings.reworkprompt,\n        strings.simplelanguage,\n        strings.size,\n        strings.showprompt,\n        strings.showpromptbutton_tooltip,\n        strings.summarize_baseprompt,\n        strings.summarize_headline,\n        strings.targetlanguage,\n        strings.technicallanguage,\n        strings.texttouse,\n        strings.toolname_audiogen,\n        strings.toolname_describe,\n        strings.toolname_describeimg,\n        strings.toolname_describe_extension,\n        strings.toolname_imggen,\n        strings.toolname_imagetotext,\n        strings.toolname_summarize,\n        strings.toolname_summarize_extension,\n        strings.toolname_translate,\n        strings.toolname_translate_extension,\n        strings.toolname_tts,\n        strings.toolname_tts_extension,\n        strings.translate_baseprompt,\n        strings.translate_headline,\n        strings.tts_headline,\n        strings.voice\n    ] = await getStrings(stringRequest);\n};\n\nexport const getTinyAiString = (string) => {\n    return strings[string];\n};\n\nexport const getBackAndGenerateButtonContext = () => {\n    return {\n        footer_buttons: [\n            {\n                hasText: true,\n                button_text: strings.back,\n                icon_left: true,\n                icon_right: false,\n                primary: false,\n                secondary: false,\n                tertiary: true,\n                iconname: 'arrow-left',\n                iconstyle: 'solid',\n                action: 'back',\n                tooltip: strings.backbutton_tooltip\n            },\n            {\n                hasText: true,\n                button_text: strings.generate,\n                icon_left: true,\n                icon_right: false,\n                primary: true,\n                secondary: false,\n                tertiary: false,\n                iconname: 'sparkle',\n                customicon: true,\n                action: 'generate',\n                tooltip: strings.generatebutton_tooltip\n            }\n        ]\n    };\n};\n\nexport const getReplaceButtonsContext = (mode) => {\n\n    return  {\n        footer_iconbuttons:\n            [\n                {\n                    action: 'delete',\n                    iconname: 'trash',\n                    tooltip: strings.deletebutton_tooltip\n                },\n                {\n                    action: 'regenerate',\n                    iconname: 'arrows-rotate',\n                    tooltip: strings.regeneratebutton_tooltip\n                }\n            ],\n        footer_buttons:\n            [\n                {\n                    action: 'insertbelow',\n                    hasText: true,\n                    button_text: strings.insertbelow,\n                    icon_left: true,\n                    icon_right: false,\n                    secondary: true,\n                    iconname: 'text-insert-last',\n                    customicon: true,\n                    tooltip: strings.insertbelow_tooltip\n                },\n                {\n                    action: mode === constants.modalModes.selection ? 'replace' : 'insertatcaret',\n                    hasText: true,\n                    button_text: mode === constants.modalModes.selection ? strings.replaceselection : strings.insertatcaret,\n                    icon_left: true,\n                    icon_right: false,\n                    primary: true,\n                    iconname: 'check',\n                    iconstyle: 'solid',\n                    tooltip: mode === constants.modalModes.selection\n                        ? strings.replaceselection_tooltip : strings.insertatcaret_tooltip\n                }\n            ],\n    };\n};\n\nexport const getInputContext = () => {\n    return {\n        input: [\n            {\n                iconname: 'sparkle',\n                customicon: true,\n                button: [\n                    {\n                        customicon: false,\n                        iconname: 'arrow-right',\n                        iconstyle: 'solid',\n                        icon_left: false,\n                        icon_right: true,\n                        tooltip: strings.freepromptbutton_tooltip\n                    }\n                ]\n            }\n        ],\n    };\n};\n\nexport const getShowPromptButtonContext = () => {\n    return {\n        hasText: true,\n        button_text: strings.showprompt,\n        icon_left: true,\n        icon_right: false,\n        tertiary: true,\n        iconname: 'eye',\n        iconstyle: 'solid',\n        action: 'showprompt',\n        textareatype: 'prompt',\n        collapsed: true,\n        tooltip: strings.showpromptbutton_tooltip\n    };\n};\n"],"names":["stringKeys","strings","async","stringRequest","map","key","component","aigenerating","aisuggestion","audiogen_headline","audiogen_placeholder","back","backbutton_tooltip","cancel","deletebutton_tooltip","describeimg_baseprompt","describeimg_headline","describe_baseprompt","describe_headline","dismiss","dismisssuggestion","error_nofile","error_nofileinclipboard_text","error_nofileinclipboard_title","error_nopromptgiven","freeprompt_placeholder","freepromptbutton_tooltip","gender","generalerror","generate","generatebutton_tooltip","hideprompt","imagefromeditor","imagetotext_baseprompt","imagetotext_headline","imagetotext_insertimage","imggen_headline","imggen_placeholder","insertatcaret","insertatcaretbutton_tooltip","insertbelow","insertbelowbutton_tooltip","keeplanguagetype","languagetype","languagetype_prompt","mainselection_heading","maxwordcount","maxwordcount_prompt","nomaxwordcount","regeneratebutton_tooltip","replaceselection","replaceselectionbutton_tooltip","reworkprompt","simplelanguage","size","showprompt","showpromptbutton_tooltip","summarize_baseprompt","summarize_headline","targetlanguage","technicallanguage","texttouse","toolname_audiogen","toolname_describe","toolname_describeimg","toolname_describe_extension","toolname_imggen","toolname_imagetotext","toolname_summarize","toolname_summarize_extension","toolname_translate","toolname_translate_extension","toolname_tts","toolname_tts_extension","translate_baseprompt","translate_headline","tts_headline","voice","string","footer_buttons","hasText","button_text","icon_left","icon_right","primary","secondary","tertiary","iconname","iconstyle","action","tooltip","customicon","mode","footer_iconbuttons","insertbelow_tooltip","constants","modalModes","selection","replaceselection_tooltip","insertatcaret_tooltip","input","button","textareatype","collapsed"],"mappings":"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"}